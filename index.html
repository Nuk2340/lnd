<!doctype html>
<html>
  <head>
    <title>Leonard Voronoy</title>
    <meta charset="utf-8">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.min.js"></script>
    <script type="text/javascript" src="./js/rhill-voronoi-core.min.js"></script>
    <script type="text/javascript">

      var scene;
      var renderer;
      var camera;

      window.onload = function(e) {

        var light;

        scene = new THREE.Scene();

        // renderer
        renderer = new THREE.WebGLRenderer({antialias: true});
        document.body.appendChild(renderer.domElement);
        renderer.setSize(window.innerWidth, window.innerHeight);

        // camera
        camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.set(0, 150, 500);
        light = new THREE.PointLight(0xffffff, 0.8);
        camera.add(light);

        // generate voronoi points
        var voronoi = new Voronoi();
        var bbox = {xl: 0, xr: window.innerWidth, yt: 0, yb: window.innerHeight};
        var sites = [ {x: 10, y: 200}, {x: 50, y: 250}, {x: 50, y: 100} /* , ... */ ];
        var diagram = voronoi.compute(sites, bbox);

        // convert voronoi diagram to threejs pointcloud
        var geometry = new THREE.Geometry();

        for (var vertex in diagram.vertices) {
          geometry.vertices.push(new THREE.Vector3(
            diagram.vertices[vertex].x,
            diagram.vertices[vertex].y,
            0.0));
        }
        var material = new THREE.PointCloudMaterial({color: 0xffffff, size: 10});
        var points = new THREE.PointCloud(geometry, material);
        scene.add(points);

        render();
      };

      function render() {
        renderer.render(scene, camera);
        requestAnimationFrame(render);
      }

    </script>
  </head>
  <body>
  </body>
</html>
